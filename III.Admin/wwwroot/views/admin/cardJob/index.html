<link href="../../../css/admin/cardJob/sideNavLeft.css" rel="stylesheet" />
<style>
    /*.popover {
        max-width: 300px;
        left: -145.5703px !important;
        top: 50px !important;
    }*/

    .custom-shadow-box {
        box-shadow: 3px 3px 3px #042906ee !important;
    }

    .img-check-in:hover {
        box-shadow: 2px 2px 2px 2px #80c196;
        border-radius: 4px;
    }

    .img-check-out:hover {
        box-shadow: 2px 2px 2px 2px #9a9797;
        border-radius: 13px;
    }

    .search-advantage-mode {
        padding-left: 0px !important;
    }

    .has-branch-department {
        bottom: -15px;
    }

    .jstree-default .jstree-clicked {
        background: #fff !important;
    }

    .ui-tabs-scrollable > .nav-button.left-nav-button {
        top: 3px;
    }

    .ui-tabs-scrollable > .nav-button.right-nav-button {
        top: 3px;
    }

    .nav-header {
        width: 50px;
        float: left;
    }

    .nav-search {
        width: 280px;
        float: right;
    }

    .nav-body {
        width: 280px;
        float: right;
    }

    .custom-btn-nav-left {
        border: 1px solid transparent;
        transition: box-shadow .28s cubic-bezier(.4,0,.2,1);
        padding-left: 10px;
        padding-right: 10px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
        background-color: #acb3b9;
        box-shadow: 2px 2px 5px #acb3b9;
        transform: rotate( 90deg );
        margin-top: 6px;
        margin-right: -15px;
    }

    .custom-nav-lef-checkbox > .span-checkbox:after {
        left: 10px !important;
        top: 6px !important;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate( 45deg );
    }

    .span-checkbox {
        background-color: blueviolet !important;
        color: black !important;
        border-radius: 50%;
        padding: 12px;
    }

    #boardAll:hover {
        color: #337ab7 !important;
    }

    .modal-open .z-index-1049 {
        z-index: 1049 !important;
    }
    body > .datepicker.datepicker-dropdown.dropdown-menu.datepicker-orient-top {
        z-index: 1050 !important;
    }
    .board-selected-special {
        color: #337ab7 !important;
    }
    .show-normal i {
        font-size: 30px;
    }
    .show-selected i {
        font-size: 40px !important;
        color: green;
    }
    @media (max-width:600px){
        .nav-header{
            margin-left:5px!important;
            margin-right:10px!important;
        }
        .sidenav{
            width:100vw;
        }
        .add-board{
            z-index:9999;
        }
  
    }

    .sidenav{
        width:345px;
    }

</style>
<div class="row h100">
    <!--nav left-->
    <div class="sidenav" id="mySidenav" style="overflow: hidden; padding-top: 88px" ng-show="!SearchAdvMode">
        <div class="nav-header pl10">
            <div class="btn-group actions">
                <div class="text-center" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_BTN_BOARD_WORK' | translate}}"
                       ng-class="{'show-selected' : show.board}" class="show-normal" style="color: #183153"
                       ng-click="show.board=true;show.user=false;show.groupUser=false;show.team=false;show.project=false;show.customer=false;show.contract=false;show.supplier=false;boardCommom()">
                        <i class="fas fa-tasks-alt"></i>
                    </a>
                    <!--<p class="text-underline fs8 mb5 nowrap" ng-class="{'selected-item-red':show.board}">{{'CJ_BTN_BOARD_WORK' | translate}}</p>-->
                </div>
                <div class="text-center pt5" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_BTN_DEPARTMENT' | translate}}"
                       ng-class="{'show-selected' : show.groupUser}" class="show-normal" 
                       style="color: #183153" ng-click="show.board=false;show.user=false;show.groupUser=true;show.team=false;show.project=false;show.customer=false;show.contract=false;show.supplier=false;boardCommom()">
                        <i class="fas fa-door-open fs30"></i>
                    </a>
                    <!--<p class="text-underline fs8 mb5 nowrap" ng-class="{'selected-item-red':show.groupUser}">{{'CJ_BTN_DEPARTMENT' | translate}}</p>-->
                </div>
                <div class="text-center pt5" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_CURD_BTN_MEMBER' | translate}}"
                       ng-class="{'show-selected' : show.user}" class="show-normal" 
                       style="color: #183153" ng-click="show.board=false;show.user=true;show.groupUser=false;show.team=false;show.project=false;show.customer=false;show.contract=false;show.supplier=false;boardCommom()">
                        <i class="fas fa-user-tie fs30"></i>
                    </a>
                    <!--<p class="text-underline fs8 mb5 nowrap" ng-class="{'selected-item-red':show.user}">{{'CJ_CURD_BTN_MEMBER' | translate}}</p>-->
                </div>
                <div class="text-center pt5" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_CURD_TXT_TEAM' | translate}}"
                       ng-class="{'show-selected' : show.team}" class="show-normal"  style="color: #183153"
                       ng-click="show.board=false;show.user=false;show.groupUser=false;show.team=true;show.project=false;show.customer=false;show.contract=false;show.supplier=false;boardCommom()">
                        <i class="fas fa-users fs30"></i>
                    </a>
                    <!--<p class="text-underline fs8 mb5" ng-class="{'selected-item-red':show.team}">{{'CJ_CURD_TXT_TEAM' | translate}}</p>-->
                </div>
                <div class="text-center pt5" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_CURD_BTN_PROJECT' | translate}}"
                       ng-class="{'show-selected' : show.project}" class="show-normal"  style="color: #183153"
                       ng-click="show.board=false;show.user=false;show.groupUser=false;show.team=false;show.project=true;show.customer=false;show.contract=false;show.supplier=false;boardCommom()">
                        <i class="fas fa-address-card fs30"></i>
                    </a>
                    <!--<p class="text-underline fs8 mb5 nowrap" ng-class="{'selected-item-red':show.project}">{{'CJ_CURD_BTN_PROJECT' | translate}}</p>-->
                </div>
                <div class="text-center pt5" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_CURD_BTN_CUSTOMER' | translate}}"
                       ng-class="{'show-selected' : show.customer}" class="show-normal"  style="color: #183153"
                       ng-click="show.board=false;show.user=false;show.groupUser=false;show.team=false;show.project=false;show.customer=true;show.contract=false;show.supplier=false;boardCommom()">
                        <i class="fa-solid fa-person-dots-from-line fs30"></i> 
                    </a>
                    <!--<p class="text-underline fs8 mb5 nowrap" ng-class="{'selected-item-red':show.customer}">{{'CJ_CURD_BTN_CUSTOMER' | translate}}</p>-->
                </div>
                <div class="text-center pt5" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_CURD_BTN_CONTRACT' | translate}}"
                       ng-class="{'show-selected' : show.contract}" class="show-normal"  style="color: #183153"
                       ng-click="show.board=false;show.user=false;show.groupUser=false;show.team=false;show.project=false;show.customer=false;show.contract=true;show.supplier=false;boardCommom()">
                        <i class="fas fa-file-signature fs30"></i>
                    </a>
                    <!--<p class="text-underline fs8 mb5 nowrap" ng-class="{'selected-item-red':show.contract}">{{'CJ_CURD_BTN_CONTRACT' | translate}}</p>-->
                </div>
                <div class="text-center pt5" style="margin-top: 25px;">
                    <a class1="btn btn-icon-only btn-circle btn-outline white-custom w30 h-30 pt5" title="{{'CJ_BTN_SUPPLIER' | translate}}"
                       ng-class="{'show-selected' : show.supplier}" class="show-normal"  style="color: #183153"
                       ng-click="show.board=false;show.user=false;show.groupUser=false;show.team=false;show.project=false;show.customer=false;show.contract=false;show.supplier=true;boardCommom()">
                        <i class="fas fa-american-sign-language-interpreting fs30"></i>
                    </a>
                    <!--<p class="text-underline fs8 mb5 nowrap" ng-class="{'selected-item-red':show.supplier}">{{'CJ_BTN_SUPPLIER' | translate}}</p>-->
                </div>
            </div>
        </div>
        <div class="nav-search">
            <div class="col-md-11 pb5 pr5 pl-0">
                <input class="form-control br24" autofocus ng-model="searchKey.BoardName" placeholder="{{'CJ_TXT_FIND' | translate}} {{tabCommon.toLowerCase()}} {{'CJ_TXT_BY_NAME' | translate}}..." ng-change="searchBoardCommom()"><span class="fas fa-times fs15" style="position:absolute;right: 30px;top: 10px;cursor: pointer;" ng-click="searchKey.BoardName='';searchBoardCommom()" ng-if="searchKey.BoardName!=''"></span>
            </div>
            <div class="col-md-1 pr-0">
                <div class="pull-right pr10 panel-log" ng-click="navLeft()" ng-show="showNavLeft">
                    <button class="custom-btn-nav-left" style="background-color: transparent !important; border: none !important; box-shadow: none !important">
                        <i class="fa fa-chevron-down fs12" style="color: #183153"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="nav-body">
            <div id="list-board" class="border scroller-sm-fade p0 height-box" ng-if="show.board" style="height: 84vh;">
                <div class="col-md-12 p0 boards">
                    <div class="col-md-12 pl5 pr5 text-white">
                        <div class="col-xs-12 pt10 p0 d-flex align-item-ct justify-content-sb">
                            <span class="d-flex align-item-ct">
                                <a class="fs25 w25 pull-left text-center add-board" ng-click="addBoard()">
                                    <span><i class="fas fa-plus color-dark cursor"></i></span>
                                </a>
                                <a class="fs20 w75 pull-left text-center" ng-click="editBoard(boardCode)" ng-if="boardCode != '' && boardCode != null">
                                    <span><i class="fas fa-pen-to-square color-dark cursor"></i></span>
                                </a>
                                <a class="fs20 w25 pull-left text-center" ng-click="deleteBoard(boardId)" ng-if="boardCode != '' && boardCode != null">
                                    <span><i class="fas fa-trash-alt color-dark cursor"></i></span>
                                </a>
                            </span>
                            <a id="boardAll" ng-click="detail(null, null)" ng-class="{'bold' : boardCode==x.BoardCode}" class="text-underline pull-right">{{'CJ_BOARD_ALL' | translate}}</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 p0 boards" ng-repeat="board in listBoardsGroup">
                    <div class="col-md-12 pl5 pr5" ng-repeat="x in board.ListBoard | filter: searchKey">
                        <div class="col-md-12  mnh35 d-flex align-item-ct cursor" ng-repeat="k in x | filter: searchKey" ng-click="detail(k.BoardCode, k.BoardID)"
                             ng-class="{'board-selected-special':boardCode==k.BoardCode || boardCode == '' || boardCode == null}">
                            <span class="flex-basis-50 flex-no-shrink pull-left">
                                <i class="{{k.Avatar}} fs20"></i>
                            </span>
                            <b>{{k.BoardName}}</b>
                        </div>
                    </div>
                </div>
            </div>
            <div id="list-groupUser" ng-show="show.groupUser">
                <div class="col-md-12 pr-0 height-box border pl-0 pt5 overflow-auto" style="height: 85vh;">
                    <div class="col-md-12 bg-white p10 br4 scrollbar-sm">
                        <span class="pull-right">
                            <label class="mt-checkbox mt-checkbox-outline fs12">
                                <a ng-show="totalSelectBoardCommon != totalDepartment" class="text-success" ng-click="checkAllDepartment()"> Tất cả</a>
                                <a ng-show="totalSelectBoardCommon == totalDepartment" class="text-success" ng-click="checkAllDepartment()"> Bỏ chọn</a>
                            </label>
                        </span>
                        <span class="pb5 pl5 d-flex">
                            <i class="fas fa-warehouse pr5" style="color: #888c8e;"></i>
                            <span>
                                <span class="text-underline pr-1">{{tabCommon}}</span>
                            </span>
                        </span>
                        <!--<div id="treeDiv" tree="treeInstance" js-tree="treeConfigGroupUser" should-apply="ac()" ng-model="treeDataDepartment" tree-events-obj="treeEventsGroupUser"></div>-->
                        <div class="col-md-12 pl5 pr5 overflow-auto">
                            <div class="col-md-12 p0 mnh35 d-flex align-item-ct cursor" ng-repeat="k in listDepartmentFlat" ng-click="selectDepartment(k)" ng-class="{'board-selected-special':k.IsSelected}">
                                <span class="w50 pull-left">
                                    <i class="fas fa-building color-dark cursor fs20"></i>
                                </span>
                                <b>{{k.Title}}</b>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="list-common" ng-if="show.contract">
                <div class="col-md-12 height-box border pr-0 pl-0 pt5">
                    <div class="col-md-12 br4 bg-white">
                        <div class="row board-header-commom">
                            <span class="fs12 pl15">
                                <i class="{{iconCommon}}"></i>&nbsp;&nbsp;{{tabCommon}} ({{listBoardCommon.length}}/{{totalBoardCommon}})
                            </span>
                            <span class="pull-right">
                                <label class="mt-checkbox mt-checkbox-outline fs12">
                                    <a ng-show="listBoardCommon.length != totalSelectBoardCommon" class="text-success pr-2" ng-click="checkAllCommon()"> Tất cả</a>
                                    <a ng-show="listBoardCommon.length == totalSelectBoardCommon" class="text-success pr-2" ng-click="checkAllCommon()"> Bỏ chọn</a>
                                </label>
                            </span>
                        </div>
                        <div class="body row scroller-sm-fade" id="list-board-commom">
                            <div class="col-md-12 pt10 cursor" ng-repeat="x in listBoardCommon" context-menu="contextmenuOptionsCommon(x.Code)" ng-click="selectUser(x)" ng-class="{'selected-item':x.IsCheck}">
                                <div class="pl-0" ng-class="{'col-md-12 pr-0' : x.IsShowPercent, 'col-md-11 pr-0' : !x.IsShowPercent}">
                                    <div class="mt-checkbox-list pb-0 pt-0" role="button">
                                        <span class="w50 pull-left">
                                            <i class="fas fa-user-tie color-dark cursor fs20"></i>
                                        </span>
                                        <label class="custom-nav-lef-checkbox mt-checkbox mt-checkbox-outline bold mb-0" ng-class="{'board-selected-special':x.IsCheck}">
                                            {{x.Name}} [{{$index + 1}}]
                                            <div style="float:right;" ng-show="x.IsShowPercent">
                                                {{x.PercentObject}}%
                                            </div>
                                            <!--<input type="checkbox" ng-change="selectBoardCommon()" id="chkBoardComom_{{x.Code}}" ng-model="x.IsCheck">-->
                                            <!--<span class="span-checkbox"></span>-->
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-1 pull-right" ng-show="!x.IsShowPercent" style="margin-top: -10px;">
                                    <div class="actions cursor" ng-click="showPercent(x.Type, x.Code)">
                                        <i class="fa fa-eye fs18 text-success" aria-hidden="true"></i>
                                    </div>
                                </div>
                                <span class="gray fs10 pl25">{{x.CreatedTime | fomartDateTime}}&nbsp; - &nbsp;{{'CJ_LBL_WORK' | translate}}: <span class="bold" ng-class="{'text-blue':x.CountWork>0}">{{x.CountWork}}</span></span><span></span>
                                <hr class="mt5 mb5" style="border-top: 1px solid #d2cdcd;" ng-if="($index + 1) !=listBoardCommon.length" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="list-common" ng-if="show.project">
                <div class="col-md-12 height-box border pr-0 pl-0 pt5">
                    <div class="col-md-12 br4 bg-white">
                        <div class="row board-header-commom">
                            <span class="fs12 pl15">
                                <i class="{{iconCommon}}"></i>&nbsp;&nbsp;{{tabCommon}} ({{listBoardCommon.length}}/{{totalBoardCommon}})
                            </span>
                            <span class="pull-right">
                                <label class="mt-checkbox mt-checkbox-outline fs12">
                                    <a ng-show="listBoardCommon.length != totalSelectBoardCommon" class="text-success pr-2" ng-click="checkAllCommon()"> Tất cả</a>
                                    <a ng-show="listBoardCommon.length == totalSelectBoardCommon" class="text-success pr-2" ng-click="checkAllCommon()"> Bỏ chọn</a>
                                </label>
                            </span>
                        </div>
                        <div class="body row scroller-sm-fade" id="list-board-commom">
                            <!--<div class="col-md-12" ng-repeat="x in listBoardCommon" context-menu="contextmenuOptionsCommon(x.Code)" ng-class="{'selected-item':x.IsCheck}">-->
                            <div class="col-md-12 pt10" ng-repeat="x in listBoardCommon" ng-class="{'selected-item':x.IsCheck}">
                                <div class="pl-0 cursor" ng-class="{'col-md-12 pr-0' : x.IsShowPercent, 'col-md-11 pr-0' : !x.IsShowPercent}" ng-click="selectUser(x)">
                                    <div class="mt-checkbox-list pb-0 pt-0" role="button">
                                        <span class="w50 pull-left">
                                            <i class="fas fa-address-card color-dark cursor fs20"></i>
                                        </span>
                                        <label class="custom-nav-lef-checkbox mt-checkbox mt-checkbox-outline bold mb-0" ng-class="{'board-selected-special':x.IsCheck}">
                                            {{x.Name}} [{{$index + 1}}]
                                            <div style="float:right;" ng-show="x.IsShowPercent">
                                                {{x.PercentObject}}%
                                            </div>
                                            <!--<input type="checkbox" ng-change="selectBoardCommon()" id="chkBoardComom_{{x.Code}}" ng-model="x.IsCheck">
        <span class="span-checkbox"></span>-->
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-1 pull-right" ng-show="!x.IsShowPercent" style="margin-top: -10px;">
                                    <div class="actions cursor" ng-click="showPercent(x.Type, x.Code)">
                                        <i class="fa fa-eye fs18 text-success" aria-hidden="true"></i>
                                    </div>
                                </div>
                                <span class="gray fs10 pl25">{{x.CreatedTime | fomartDateTime}}&nbsp; - &nbsp;{{'CJ_LBL_WORK' | translate}}: <span class="bold" ng-class="{'text-blue':x.CountWork>0}">{{x.CountWork}}</span></span><span></span>
                                <hr class="mt5 mb5" style="border-top: 1px solid #d2cdcd;" ng-if="($index + 1) !=listBoardCommon.length" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="list-common" ng-if="!show.groupUser && !show.board && !show.project && !show.contract">
                <div class="col-md-12 height-box border pr-0 pt5">
                    <div class="col-md-12 br4 bg-white">
                        <div class="row board-header-commom">
                            <span class="fs12 pl15">
                                <i class="{{iconCommon}}"></i>&nbsp;&nbsp;{{tabCommon}} ({{listBoardCommon.length}}/{{totalBoardCommon}})
                            </span>
                            <span class="pull-right">
                                <label class="mt-checkbox mt-checkbox-outline fs12">
                                    <a ng-show="listBoardCommon.length != totalSelectBoardCommon" class="text-success pr-2" ng-click="checkAllCommon()"> Tất cả</a>
                                    <a ng-show="listBoardCommon.length == totalSelectBoardCommon" class="text-success pr-2" ng-click="checkAllCommon()"> Bỏ chọn</a>
                                </label>
                            </span>
                        </div>
                        <div class="body row scroller-sm-fade" id="list-board-commom">
                            <div class="col-md-12 pl-0 pt10 cursor" ng-repeat="x in listBoardCommon" context-menu="contextmenuOptionsCommon(x.Code)" ng-click="selectUser(x)" ng-class="{'selected-item':x.IsCheck}">
                                <div class="mt-checkbox-list pb-0 pt-0" role="button">
                                    <span class="w50 pull-left">
                                        <i class="fas fa-user-tie color-dark cursor fs20"></i>
                                    </span>
                                    <label class="custom-nav-lef-checkbox mt-checkbox mt-checkbox-outline bold mb-0" ng-class="{'board-selected-special':x.IsCheck}">
                                        {{x.Name}} [{{$index + 1}}]

                                        <!--<input type="checkbox" ng-change="selectBoardCommon()" id="chkBoardComom_{{x.Code}}" ng-model="x.IsCheck">
        <span class="span-checkbox"></span>-->
                                    </label>
                                </div>
                                <span class="gray fs10 pl25">{{x.CreatedTime | fomartDateTime}}&nbsp; - &nbsp;{{'CJ_LBL_WORK' | translate}}: <span class="bold" ng-class="{'text-blue':x.CountWork>0}">{{x.CountWork}}</span></span><span></span>
                                <hr class="mt5 mb5" style="border-top: 1px solid #d2cdcd;" ng-if="($index + 1) !=listBoardCommon.length" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--end left-->
    <!--board detail right-->
    <div class="col-md-12 h100" ng-class="{'search-advantage-mode' : SearchAdvMode}" style="padding-left:330px" id="BoardDetail" ng-include="'../views/admin/cardJob/board-detail.html'" />
    <!--end board detail right-->
</div>
